## 前置知识
### 基本知识
SSH是一种网络通信协议，与Https相似；
默认端口号：22；
可用于连接远程服务器。

### 常用功能
链接服务器：
1. 输入命令：`ssh <要登录的服务器的账户>@<要登录的服务器的IP地址>`
2. 输入刚刚输入的账户的密码。

### 常见配置
可以在客户端给服务器**设置别名**。用一个字符串去替代 `<要登录的服务器的账户>@<要登录的服务器的IP地址>`，比如我可以设置为输入命令`ssh honlnk`链接服务器，这样可以免去记忆复杂的IP地址。
可以**免密登录**。在客户端存储私钥，在服务端存储公钥；用来验证身份，可免去频繁的输入账户密码。

使用ssh需要使用`openssh`的包；
服务器主机需安装`openssh-server`，客户端主机需安装`openssh-client`；
绝大多数的操作系统已经自带了`openssh`，无需需手动安装；
手动安装，以`Ubuntu`作为**服务器**为例：运行命令`sudo apt install openssh-server`。

**公钥**：是公开的锁，可以随意分发，用于加密数据和验证你的身份。
**私钥**：是锁的钥匙，必须严格保密，用于证明身份和解密数据。

在**客户端**的`~/.ssh/`目录下需要有一个**格式**为`id_***`的文件，存储的是不可泄露的私钥。
在**服务器**的`~/.ssh/`目录下需要有一个**名字**为`authorized_keys`，的文件，存储所有允许链接该服务器的钥匙（私钥）对应的锁（公钥）。PS：存储的是锁，并非钥匙；钥匙是要揣在自己兜里（客户端）的。

在**客户端**的`~/.ssh/`目录下***可以***有一个名为`config`的文件，用于存储一些基本配置。**这是可选的**。

## 具体实现

### 尝试初步链接服务器
1. 在云服务厂商平台查看服务器的IP地址（假设你已经有了一个远程服务器）
2. 输入命令：`ssh <账户>@<IP地址>`
3. 输入账户密码
4. 正常进入服务器
5. 按快捷键`Ctrl/Command + D`或直接关闭当前终端窗口，关闭与服务器的连接。

### 在客户端给服务器设置别名
在客户端中设置的别名，不会影响到服务器本身，也不会影响其他客户端连接服务器。
1. 在客户端的`~/.ssh/`目录下创建一个名为`config`的文件。
	- 打开终端输入`touch ~/.ssh/config`
2. 打开`config`文件，输入基本配置
	- 可使用VSCode等文本编辑器，也可使用命令行中的Vim编辑器
	- 输入以下配置信息
	  ``` bash
	 Host <别名>
	 Hostname <服务器IP地址>
	 User <要登录的账户名>
		```
	- PS：在这不可设置密码，也无法实现免密登录。
3. 尝试使用别名连接服务器
	1. 输入命令：`ssh <别名>`
	2. 输入账户密码
	3. 正常进入服务器
	4. 与上文同样方式退出服务器。

### 设置免密登录
1. 生成验证身份的公钥和私钥，**客户端**输入命令：`ssh-keygen`
2. 查看生成的公钥和私钥：打开～/.ssh/目录，可以看到新增了两个文件。
	- `id_***`：私钥，不可移动、删除操作，避免泄露。
	- `id_***.pub`：公钥，可删除、移动，但不推荐。可以上传到多个服务器。
3. 输入命令：`ssh-copy-id <别名>` 或 `ssh-copy-id <账户>@<IP地址>`，然后输入账户密码。
	- 当然，也可手动将这个文件中的内容粘贴到服务器的`~/.ssh/authorized_keys`文件中。
4. 尝试使用别名以及免密登录服务器
	1. 输入命令：`ssh <别名>`
	2. 这个奶茶给你进入服务器

### 使用VSCode访问服务器
为什么使用VSCode访问服务器？因为好处太多了，自己去配置上去摸索摸索吧，关键也不难！
1. 打开VSCode的扩展商店，输入搜索框`remote`。
2. 安装三个插件：
	- `Remote - SSH`
	- `Remote - SSH: Editing Configuration Files`
	- `Remote Explorer`
3. 打开侧边栏新出现的“远程资源管理器”
	![](images/远程资源管理器Logo.png)
4. 可以看到在SSH的目录下已经有了一个前文中设置的<别名>，这是因为下载的插件会去读取`~/.ssh/config`中的内容。
5. 选中配置的选项，右侧会出现两个按钮，单击任意一项均可连接至远程服务器
	- 在当前窗口中连接
	- 在新窗口中连接
	![](images/连接远程仓库按钮.png)
6. 按`Ctrl/Command + ~` 可打开VSCode的终端，直接控制远程服务器。
7. 打开侧边栏的“资源管理器”
	![](images/资源管理器Logo.png)
8. 单击“打开文件夹”按钮，选择远程服务器，可根据可视化菜单选择想要打开的
	![](images/文件选择器可视化页面.png)
9. 选择打开文件后，VSCode会将记录自动将其保存在“远程资源管理器页面中”，名称为空的代表打开的是根目录 `/` 
	![](images/远程资源管理器文件打开记录.png)
10. 在VSCode中可以直接打开，并编辑绝大多数有权限的文件，可避免使用学习成本较高的Vim编辑器。
11. 在VSCode中可以在文件列表中直接对目标文件进行“增删改查”，可避免输入大量的基础命令。
12. 断开连接仅需要关闭当前VSCode窗口。